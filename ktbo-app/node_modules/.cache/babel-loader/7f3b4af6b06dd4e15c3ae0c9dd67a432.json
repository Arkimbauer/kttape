{"ast":null,"code":"import _slicedToArray from \"/Users/adriaarki/Desktop/KTBO/ktbo-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Home/index.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState } from 'react'; //import Context from '../Context'\n\nimport { withRouter, Route } from 'react-router-dom'; //import queryString from 'query-string'\n\nimport logic from '../../logic';\nimport Navigation from '../Navigation';\nimport Documents from '../Documents';\nimport Categories from '../Categories';\nimport MyOrders from '../My-orders';\nimport CurrentOrder from '../Current-order';\nimport MyAccount from '../My-account';\nimport Results from '../Results';\nimport AdminPanel from '../Admin-panel';\n\nfunction Home({\n  history\n}) {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        articles = _useState2[0],\n        setArticles = _useState2[1];\n\n  const _useContext = useContext(Context),\n        user = _useContext.user,\n        setUser = _useContext.setUser;\n\n  async function handleSearch(query) {\n    if (query.length > 0) {\n      const articleList = await logic.searchArticles(query); //TODO handleERROR with feedback con error que devuelve si no hay del bsucado\n\n      setArticles(articleList);\n      history.push(\"/home/search/?q=\".concat(query));\n    } else {\n      const allArticles = await logic.retrieveAllArticles(); //TODO handleERROR with feedback con error que devuelve si no hay del bsucado\n\n      setArticles(allArticles);\n      history.push('/home/search/allArticles');\n    }\n  }\n\n  return React.createElement(React.Fragment, null, logic.isUserLogged() && React.createElement(\"header\", {\n    className: \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"superior\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"superior__image\",\n    src: \"https://kttape.es/wp-content/uploads/2019/02/Logo-sense-fons-dreta-blanc.png\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"section\", {\n    className: \"superior__conditions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    className: \"footer__privacity\",\n    target: \"_blank\",\n    href: \"https://kttape.es/privacy-policy/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Privacy Policy\"), React.createElement(\"a\", {\n    className: \"footer__terms\",\n    target: \"_blank\",\n    href: \"https://kttape.es/terms-of-use/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Terms of Use\"))), React.createElement(Navigation, {\n    onSearch: handleSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })), React.createElement(\"main\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/home/documents\",\n    render: () => !logic.isUserLogged() ? history.push('/') : React.createElement(Documents, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/home/categories\",\n    render: () => !logic.isUserLogged() ? history.push('/') : React.createElement(Categories, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/home/my-orders\",\n    render: () => !logic.isUserLogged() ? history.push('/') : React.createElement(MyOrders, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/home/current-order\",\n    render: () => !logic.isUserLogged() ? history.push('/') : React.createElement(CurrentOrder, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/home/my-account\",\n    render: () => !logic.isUserLogged() ? history.push('/') : React.createElement(MyAccount, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/home/admin-panel\",\n    render: () => !logic.isUserAdmin() ? history.push('/') : React.createElement(AdminPanel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/home/search\",\n    render: () => !logic.isUserLogged() ? history.push('/') : articles && React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Results, {\n      searchResult: articles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), logic.isUserLogged() && React.createElement(\"footer\", {\n    className: \"footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    className: \"footer__privacity\",\n    target: \"_blank\",\n    href: \"https://kttape.es/privacy-policy/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Privacy Policy\"), React.createElement(\"a\", {\n    className: \"footer__terms\",\n    target: \"_blan\",\n    href: \"https://kttape.es/terms-of-use/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Terms of Use\")));\n}\n\nexport default withRouter(Home);","map":{"version":3,"sources":["/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Home/index.js"],"names":["React","useState","withRouter","Route","logic","Navigation","Documents","Categories","MyOrders","CurrentOrder","MyAccount","Results","AdminPanel","Home","history","articles","setArticles","useContext","Context","user","setUser","handleSearch","query","length","articleList","searchArticles","push","allArticles","retrieveAllArticles","isUserLogged","isUserAdmin"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState } from 'react'\n//import Context from '../Context'\nimport { withRouter, Route } from 'react-router-dom'\n//import queryString from 'query-string'\nimport logic from '../../logic'\n\nimport Navigation from '../Navigation'\n\nimport Documents from '../Documents'\nimport Categories from '../Categories'\nimport MyOrders from '../My-orders'\nimport CurrentOrder from '../Current-order'\nimport MyAccount from '../My-account'\nimport Results from '../Results'\nimport AdminPanel from '../Admin-panel'\n\n\n\nfunction Home({history}) {\n\n  const [articles, setArticles] = useState()\n  const {user, setUser} = useContext(Context)\n\n\n  async function handleSearch(query) {\n    \n    if(query.length > 0){\n    const articleList = await logic.searchArticles(query)\n    \n    //TODO handleERROR with feedback con error que devuelve si no hay del bsucado\n\n    setArticles(articleList)\n    \n    history.push(`/home/search/?q=${query}`)\n\n    }else{\n\n      const allArticles = await logic.retrieveAllArticles()\n      //TODO handleERROR with feedback con error que devuelve si no hay del bsucado\n  \n      setArticles(allArticles)\n      \n      history.push('/home/search/allArticles')\n  \n    }\n  }   \n\n    \n    return <>\n        {logic.isUserLogged() &&\n          <header className=\"header\">\n            <section className=\"superior\">\n              <img className=\"superior__image\" src=\"https://kttape.es/wp-content/uploads/2019/02/Logo-sense-fons-dreta-blanc.png\" />\n              <section className=\"superior__conditions\">\n                <a className=\"footer__privacity\" target=\"_blank\" href=\"https://kttape.es/privacy-policy/\" >Privacy Policy</a>            \n                <a className=\"footer__terms\" target=\"_blank\" href=\"https://kttape.es/terms-of-use/\" >Terms of Use</a>\n                </section>\n            </section>\n            <Navigation onSearch={handleSearch} />\n          </header>\n        }\n        <main>\n            \n            <Route path=\"/home/documents\" render={() => !logic.isUserLogged() ? history.push('/') : <Documents /> } />\n            <Route path=\"/home/categories\" render={() => !logic.isUserLogged() ? history.push('/') : <Categories /> } />\n            <Route path=\"/home/my-orders\" render={() => !logic.isUserLogged() ? history.push('/') : <MyOrders /> } />\n            <Route path=\"/home/current-order\" render={() => !logic.isUserLogged() ? history.push('/') : <CurrentOrder /> } />\n            <Route path=\"/home/my-account\" render={() => !logic.isUserLogged() ? history.push('/') : <MyAccount /> } />\n            <Route path=\"/home/admin-panel\" render={() => !logic.isUserAdmin() ? history.push('/') : <AdminPanel /> } />\n\n            <Route path=\"/home/search\" render={() => !logic.isUserLogged() ? history.push('/') : articles && <section><Results searchResult={articles}/></section> } />\n\n\n        </main>\n        {logic.isUserLogged() &&\n          <footer className=\"footer\">\n            <a className=\"footer__privacity\" target=\"_blank\" href=\"https://kttape.es/privacy-policy/\" >Privacy Policy</a>            \n            <a className=\"footer__terms\" target=\"_blan\" href=\"https://kttape.es/terms-of-use/\" >Terms of Use</a>\n          </footer>\n        }\n\n    </>\n\n}\n\nexport default withRouter(Home)"]},"metadata":{},"sourceType":"module"}