{"ast":null,"code":"import _slicedToArray from \"/Users/adriaarki/Desktop/KTBO/ktbo-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Current-order/ResultsCart/index.js\";\nimport React, { useState } from 'react';\nimport logic from '../../../logic';\nimport CartArticle from './CartArticle';\nimport { withRouter } from 'react-router-dom';\nimport Modal from '../../Modal';\n\nfunction ResultsCart({\n  history,\n  cart,\n  retrieverCart\n}) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        message = _useState2[0],\n        setMessage = _useState2[1];\n\n  let totalPrice = 0; //const [ article , setArticle] = useState(undefined) \n\n  async function handleSubmit(articleId, quantity) {\n    try {\n      await logic.addToCart(articleId, quantity);\n      retrieverCart();\n    } catch (error) {}\n  }\n\n  async function handleRemove(event) {\n    event.preventDefault();\n    const articleId = event.target.articleId.value;\n    await logic.removeToCart(articleId);\n    retrieverCart();\n  }\n\n  async function handlePlaceOrder() {\n    try {\n      const _ref = await logic.placeOrder(),\n            message = _ref.message;\n\n      const messageOk = message;\n      setMessage(messageOk);\n      console.log(message);\n    } catch (_ref2) {\n      let message = _ref2.message;\n      setMessage(message);\n    }\n  }\n\n  function handleModal() {\n    setMessage(null);\n    history.push('/home/my-orders');\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"currentOrder__placeOrder\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: handlePlaceOrder,\n    className: \"currentOrder__button--placeOrder\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"PLACE ORDER\"), React.createElement(\"h3\", {\n    className: \"currentOrder__totalPrice\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"TOTAL PRICE: \", totalPrice.toFixed(2), \" \\u20AC\")), React.createElement(\"section\", {\n    className: \"currentOrder__articles\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, cart.map(element => {\n    const _element$item$article = element.item.article,\n          price = _element$item$article.price,\n          id = _element$item$article.id,\n          articleQuantity = element.quantity;\n    totalPrice += price * articleQuantity;\n    return React.createElement(CartArticle, {\n      key: id,\n      element: element,\n      onSubmit: handleSubmit,\n      onRemove: handleRemove,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    });\n  })), message && React.createElement(Modal, {\n    message: message,\n    showModal: handleModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }));\n}\n\nexport default withRouter(ResultsCart);","map":{"version":3,"sources":["/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Current-order/ResultsCart/index.js"],"names":["React","useState","logic","CartArticle","withRouter","Modal","ResultsCart","history","cart","retrieverCart","message","setMessage","totalPrice","handleSubmit","articleId","quantity","addToCart","error","handleRemove","event","preventDefault","target","value","removeToCart","handlePlaceOrder","placeOrder","messageOk","console","log","handleModal","push","toFixed","map","element","item","article","price","id","articleQuantity"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport logic from '../../../logic'\nimport CartArticle from './CartArticle'\nimport { withRouter } from 'react-router-dom'\n\nimport Modal from '../../Modal'\n\n\n\nfunction ResultsCart({ history, cart , retrieverCart}) {\n\n    const [message, setMessage] = useState(null)\n\n    let totalPrice = 0\n    //const [ article , setArticle] = useState(undefined) \n\n    async function handleSubmit(articleId, quantity) {\n        try {\n            await logic.addToCart(articleId, quantity)\n            retrieverCart()\n            \n        } catch (error) {\n            \n        }\n    }\n\n    async function handleRemove(event) {\n        event.preventDefault()\n        const { target: { articleId: { value: articleId }  } } = event\n        \n        await logic.removeToCart(articleId)\n        retrieverCart()\n    }\n\n    async function handlePlaceOrder() {\n        try {\n            \n            const { message } = await logic.placeOrder()\n            \n            const messageOk = message\n            setMessage(messageOk)\n\n            console.log(message)\n            \n        } catch ({message}) {\n            setMessage(message)\n        }\n    }\n\n    function handleModal() {\n       setMessage(null) \n       history.push('/home/my-orders')\n    }\n\n\n\n    return <>\n            <div className=\"currentOrder__placeOrder\">\n                <button onClick={handlePlaceOrder} className=\"currentOrder__button--placeOrder\">PLACE ORDER</button>\n                <h3 className=\"currentOrder__totalPrice\">TOTAL PRICE: {totalPrice.toFixed(2)} â‚¬</h3>     \n            </div>\n        <section className=\"currentOrder__articles\">\n            \n\n        {cart.map(element => {\n            const { item : { article: { price, id }} , quantity : articleQuantity } = element\n            totalPrice += price * articleQuantity\n            return <CartArticle key={id} element={element} onSubmit={handleSubmit} onRemove={handleRemove}/>\n        })}  \n        </section>\n        {message && <Modal message={message} showModal={handleModal}/>}\n    </>\n}\nexport default withRouter(ResultsCart)"]},"metadata":{},"sourceType":"module"}