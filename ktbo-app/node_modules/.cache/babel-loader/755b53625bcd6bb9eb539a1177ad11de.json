{"ast":null,"code":"import _slicedToArray from \"/Users/adriaarki/bootcamp/collab/skylab-bootcamp-201907/staff/adria-arquimbau/KTBO/ktbo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/adriaarki/bootcamp/collab/skylab-bootcamp-201907/staff/adria-arquimbau/KTBO/ktbo-app/src/components/Admin-panel/Result-orders/index.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport logic from '../../../logic';\nimport Moment from 'react-moment';\nimport Feedback from '../../Feedback';\n\nfunction ResultOrders({\n  orders,\n  retrievePendingOrders\n}) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        message = _useState2[0],\n        setMessage = _useState2[1];\n\n  useEffect(() => {\n    retrievePendingOrders();\n  }, [message]);\n\n  function handleFeedback() {\n    setMessage(null);\n  }\n\n  return React.createElement(React.Fragment, null, message && React.createElement(Feedback, {\n    message: message,\n    showFeedback: handleFeedback,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }), React.createElement(\"section\", {\n    className: \"myOrders\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, orders && orders.map(order => {\n    const state = order.state,\n          date = order.date,\n          owner = order.owner,\n          items = order.items,\n          id = order.id;\n    let totalPrice = 0;\n    return React.createElement(\"section\", {\n      key: id,\n      className: \"myOrdersAdmin__order\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"myOrders__orderCont--items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, items.map(item => {\n      const totalItem = item.article.price * item.quantity;\n      totalPrice += totalItem;\n      return React.createElement(\"ul\", {\n        key: item.id,\n        className: \"myOrders__order--items\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, \"Ref: \", item.article.ref), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, item.article.title), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, item.quantity, \" units\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, item.article.price, \" \\u20AC\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, \"Total: \", totalItem.toFixed(2), \" \\u20AC\"));\n    })), React.createElement(\"ul\", {\n      className: \"myOrdersAdmin__order--data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"statusAdminOrder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, \"State:\"), \" \", React.createElement(\"p\", {\n      className: \"status__\".concat(state),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, state.toUpperCase())), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Date: \", React.createElement(Moment, {\n      format: \"YYYY-MM-DD HH:mm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, date)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Company: \", owner.company), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Country: \", owner.country), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"E-mail: \", owner.email), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Total price: \", totalPrice.toFixed(2), \"\\u20AC\"), React.createElement(\"div\", {\n      className: \"myOrdersAdmin__order--buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: async event => {\n        event.preventDefault();\n\n        try {\n          const _ref = await logic.changeStateOrder(id),\n                message = _ref.message;\n\n          setMessage(message);\n        } catch (_ref2) {\n          let message = _ref2.message;\n          setMessage(message);\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Change State\")), React.createElement(\"form\", {\n      onSubmit: async event => {\n        event.preventDefault();\n\n        try {\n          const _ref3 = await logic.removePendingOrder(id),\n                message = _ref3.message;\n\n          setMessage(message);\n        } catch (_ref4) {\n          let message = _ref4.message;\n          setMessage(message);\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Remove Order\")))));\n  })));\n}\n\nexport default withRouter(ResultOrders);","map":{"version":3,"sources":["/Users/adriaarki/bootcamp/collab/skylab-bootcamp-201907/staff/adria-arquimbau/KTBO/ktbo-app/src/components/Admin-panel/Result-orders/index.js"],"names":["React","useState","useEffect","withRouter","logic","Moment","Feedback","ResultOrders","orders","retrievePendingOrders","message","setMessage","handleFeedback","map","order","state","date","owner","items","id","totalPrice","item","totalItem","article","price","quantity","ref","title","toFixed","toUpperCase","company","country","email","event","preventDefault","changeStateOrder","removePendingOrder"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, {useState, useEffect} from 'react'\nimport { withRouter } from 'react-router-dom'\nimport logic from '../../../logic'\nimport Moment from 'react-moment'\nimport Feedback from '../../Feedback'\n\nfunction ResultOrders({ orders, retrievePendingOrders }) {\n    \n    const [message, setMessage] = useState(null)\n    \n    useEffect(() => {\n        retrievePendingOrders()\n    },[message])\n\n    function handleFeedback() {\n        setMessage(null) \n    }\n    \n    return <>\n\n        {message && <Feedback message={message} showFeedback={handleFeedback}/>}\n        <section className=\"myOrders\">\n            {orders && orders.map(order =>{\n                \n                const {state, date, owner, items, id} = order\n                let totalPrice = 0\n\n            return <section key={id} className=\"myOrdersAdmin__order\">\n                \n                <section  className=\"myOrders__orderCont--items\">{items.map(item =>{\n                    const totalItem = item.article.price * item.quantity\n                    totalPrice += totalItem\n                    return <ul key={item.id} className=\"myOrders__order--items\">\n                        <li>Ref: {item.article.ref}</li>\n                        <li>{item.article.title}</li>\n                        <li>{item.quantity} units</li>\n                        <li>{item.article.price} €</li>\n                        <li>Total: {totalItem.toFixed(2)} €</li>\n                    </ul>\n                })}</section>\n\n                <ul className=\"myOrdersAdmin__order--data\">\n                    <li className=\"statusAdminOrder\"><p>State:</p> <p className={`status__${state}`}>{state.toUpperCase()}</p></li>\n                    <li>Date: <Moment format=\"YYYY-MM-DD HH:mm\">{date}</Moment></li>\n                    <li>Company: {owner.company}</li>\n                    <li>Country: {owner.country}</li>\n                    <li>E-mail: {owner.email}</li>\n                    <li>Total price: {totalPrice.toFixed(2)}€</li>\n                <div className=\"myOrdersAdmin__order--buttons\">\n                    <form onSubmit={async event => {event.preventDefault()\n                        try {\n                            const {message} = await logic.changeStateOrder(id)\n                            setMessage(message)\n                        } catch ({message}) {\n                            setMessage(message)\n                        }}}>\n                        <button>Change State</button>\n                    </form>\n                    <form onSubmit={async event => { event.preventDefault()\n                        try {\n                            const {message} = await logic.removePendingOrder(id)\n                            setMessage(message)                        \n                        } catch ({message}) {\n                            setMessage(message)\n                        }}}>\n                        <button>Remove Order</button>\n                    </form>\n                </div>\n                </ul>\n                </section>\n\n            })}\n        </section>\n    </>\n\n}\n\nexport default withRouter(ResultOrders)"]},"metadata":{},"sourceType":"module"}