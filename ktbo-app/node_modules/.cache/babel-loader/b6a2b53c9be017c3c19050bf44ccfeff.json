{"ast":null,"code":"import _slicedToArray from \"/Users/adriaarki/Desktop/KTBO/ktbo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Login/index.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState } from 'react';\nimport logic from '../../logic';\nimport { withRouter } from 'react-router-dom';\nimport Modal from '../Modal';\n\nfunction Login({\n  history\n}) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        message = _useState2[0],\n        setMessage = _useState2[1]; //const [error, setError] = useState(null)\n\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    const _event$target = event.target,\n          email = _event$target.email.value,\n          password = _event$target.password.value;\n    handleLogin(email, password);\n  }\n\n  async function handleLogin(email, password) {\n    try {\n      const _ref = await logic.authenticateUser(email, password),\n            message = _ref.message,\n            id = _ref.id,\n            token = _ref.token;\n\n      logic.userCredentials = {\n        id,\n        token\n      };\n      const messageOk = message;\n      setMessage(messageOk);\n      history.push('/home');\n    } catch (_ref2) {\n      let message = _ref2.message;\n      setMessage(message);\n    }\n  }\n\n  function handleModal() {\n    setMessage(null);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"main\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"login__content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"login__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"form\", {\n    className: \"login__form\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"login__form--email\",\n    placeholder: \"e-mail\",\n    type: \"email\",\n    name: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"login__form--password\",\n    placeholder: \"password\",\n    type: \"password\",\n    name: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"login__form--button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Submit\")), message && React.createElement(Modal, {\n    message: message,\n    showModal: handleModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }))));\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Login/index.js"],"names":["React","useState","logic","withRouter","Modal","Login","history","message","setMessage","handleSubmit","event","preventDefault","target","email","value","password","handleLogin","authenticateUser","id","token","userCredentials","messageOk","push","handleModal"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,KAAP,MAAkB,UAAlB;;AAIA,SAASC,KAAT,CAAe;AAAEC,EAAAA;AAAF,CAAf,EAA4B;AAAA,oBAEML,QAAQ,CAAC,IAAD,CAFd;AAAA;AAAA,QAEjBM,OAFiB;AAAA,QAERC,UAFQ,kBAGxB;;;AAKA,WAASC,YAAT,CAAsBC,KAAtB,EAA6B;AACzBA,IAAAA,KAAK,CAACC,cAAN;AADyB,0BAEsDD,KAFtD,CAEjBE,MAFiB;AAAA,UAESC,KAFT,iBAEPA,KAFO,CAEEC,KAFF;AAAA,UAEqCC,QAFrC,iBAEkBA,QAFlB,CAE8BD,KAF9B;AAGzBE,IAAAA,WAAW,CAACH,KAAD,EAAQE,QAAR,CAAX;AACH;;AAED,iBAAeC,WAAf,CAA2BH,KAA3B,EAAkCE,QAAlC,EAA4C;AACxC,QAAI;AAAA,mBAC+B,MAAMb,KAAK,CAACe,gBAAN,CAAuBJ,KAAvB,EAA8BE,QAA9B,CADrC;AAAA,YACQR,OADR,QACQA,OADR;AAAA,YACiBW,EADjB,QACiBA,EADjB;AAAA,YACqBC,KADrB,QACqBA,KADrB;;AAGAjB,MAAAA,KAAK,CAACkB,eAAN,GAAwB;AAAEF,QAAAA,EAAF;AAAMC,QAAAA;AAAN,OAAxB;AACA,YAAME,SAAS,GAAGd,OAAlB;AAEAC,MAAAA,UAAU,CAACa,SAAD,CAAV;AAEAf,MAAAA,OAAO,CAACgB,IAAR,CAAa,OAAb;AACH,KATD,CASE,cAAiB;AAAA,UAAVf,OAAU,SAAVA,OAAU;AACfC,MAAAA,UAAU,CAACD,OAAD,CAAV;AACH;AACJ;;AAED,WAASgB,WAAT,GAAuB;AACnBf,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH;;AAED,SAAO,0CAEH;AAAM,IAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAS,IAAA,SAAS,EAAC,gBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADA,EAEA;AAAM,IAAA,SAAS,EAAC,aAAhB;AAA8B,IAAA,QAAQ,EAAEC,YAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAO,IAAA,SAAS,EAAC,oBAAjB;AAAsC,IAAA,WAAW,EAAC,QAAlD;AAA2D,IAAA,IAAI,EAAC,OAAhE;AAAwE,IAAA,IAAI,EAAC,OAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAO,IAAA,SAAS,EAAC,uBAAjB;AAAyC,IAAA,WAAW,EAAC,UAArD;AAAgE,IAAA,IAAI,EAAC,UAArE;AAAgF,IAAA,IAAI,EAAC,UAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI;AAAQ,IAAA,SAAS,EAAC,qBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,CAFA,EAOCF,OAAO,IAAI,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAEA,OAAhB;AAAyB,IAAA,SAAS,EAAEgB,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPZ,CADJ,CAFG,CAAP;AAgBH;;AAED,eAAepB,UAAU,CAACE,KAAD,CAAzB","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState } from 'react'\n\nimport logic from '../../logic'\nimport { withRouter } from 'react-router-dom'\n\nimport Modal from '../Modal'\n\n\n\nfunction Login({ history }) {\n    \n    const [message, setMessage] = useState(null)\n    //const [error, setError] = useState(null)\n\n\n    \n\n    function handleSubmit(event) {\n        event.preventDefault()\n        const { target: { email: { value: email }, password: { value: password } } } = event\n        handleLogin(email, password)\n    }\n\n    async function handleLogin(email, password) {\n        try {\n            const { message, id, token } = await logic.authenticateUser(email, password)\n            \n            logic.userCredentials = { id, token }\n            const messageOk = message\n        \n            setMessage(messageOk)\n\n            history.push('/home')\n        } catch({message}) {\n            setMessage(message)\n        }\n    }\n\n    function handleModal() {\n        setMessage(null) \n    }\n\n    return <>\n     \n        <main className=\"login\">\n            <section className=\"login__content\">\n            <h2 className=\"login__title\">Login</h2>\n            <form className=\"login__form\" onSubmit={handleSubmit}>\n                <input className=\"login__form--email\" placeholder=\"e-mail\" type=\"email\" name=\"email\" />\n                <input className=\"login__form--password\" placeholder=\"password\" type=\"password\" name=\"password\" />\n                <button className=\"login__form--button\">Submit</button>\n            </form>\n            {message && <Modal message={message} showModal={handleModal}/>}\n            </section>\n        </main>\n\n        \n    </>\n}\n\nexport default withRouter(Login)"]},"metadata":{},"sourceType":"module"}