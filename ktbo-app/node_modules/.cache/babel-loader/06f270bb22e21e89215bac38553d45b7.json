{"ast":null,"code":"import _slicedToArray from \"/Users/adriaarki/Desktop/KTBO/ktbo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Login/index.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState, useContext } from 'react';\nimport Context from '../Context';\nimport logic from '../../logic';\nimport { withRouter } from 'react-router-dom';\nimport Modal from '../Modal';\n\nfunction Login({\n  history\n}) {\n  debugger;\n\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        message = _useState2[0],\n        setMessage = _useState2[1];\n\n  const _useContext = useContext(Context),\n        setUser = _useContext.setUser; //const [error, setError] = useState(null)\n\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    const _event$target = event.target,\n          email = _event$target.email.value,\n          password = _event$target.password.value;\n    handleLogin(email, password);\n  }\n\n  async function handleLogin(email, password) {\n    try {\n      const _ref = await logic.authenticateUser(email, password),\n            id = _ref.id,\n            token = _ref.token;\n\n      logic.userCredentials = {\n        id,\n        token\n      };\n\n      try {\n        const user = await logic.retrieveUser();\n        setUser(user);\n      } catch (error) {//TODO\n      }\n\n      history.push('/home');\n    } catch (_ref2) {\n      let message = _ref2.message;\n      setMessage(message);\n    }\n  }\n\n  function handleModal() {\n    setMessage(null);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"main\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"login__content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"login__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"form\", {\n    className: \"login__form\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"login__form--email\",\n    placeholder: \"e-mail\",\n    type: \"email\",\n    name: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"login__form--password\",\n    placeholder: \"password\",\n    type: \"password\",\n    name: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"login__form--button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Submit\")), message && React.createElement(Modal, {\n    message: message,\n    showModal: handleModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }))));\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/adriaarki/Desktop/KTBO/ktbo-app/src/components/Login/index.js"],"names":["React","useState","useContext","Context","logic","withRouter","Modal","Login","history","message","setMessage","setUser","handleSubmit","event","preventDefault","target","email","value","password","handleLogin","authenticateUser","id","token","userCredentials","user","retrieveUser","error","push","handleModal"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState, useContext } from 'react'\nimport Context from '../Context'\n\nimport logic from '../../logic'\nimport { withRouter } from 'react-router-dom'\n\nimport Modal from '../Modal'\n\n\n\nfunction Login({ history }) {\n    debugger\n    const [message, setMessage] = useState(null)\n    const {setUser} = useContext(Context)\n    //const [error, setError] = useState(null)\n\n    function handleSubmit(event) {\n        event.preventDefault()\n        const { target: { email: { value: email }, password: { value: password } } } = event\n        handleLogin(email, password)\n    }\n\n    async function handleLogin(email, password) {\n        try {\n            const {  id, token } = await logic.authenticateUser(email, password)\n            \n            logic.userCredentials = { id, token }\n            \n\n            try {\n                const user = await logic.retrieveUser()\n                setUser(user)\n            } catch (error) {\n                //TODO\n            }\n        \n\n            history.push('/home')\n        } catch({message}) {\n            setMessage(message)\n        }\n    }\n\n    function handleModal() {\n        setMessage(null) \n    }\n\n    return <>\n     \n        <main className=\"login\">\n            <section className=\"login__content\">\n            <h2 className=\"login__title\">Login</h2>\n            <form className=\"login__form\" onSubmit={handleSubmit}>\n                <input className=\"login__form--email\" placeholder=\"e-mail\" type=\"email\" name=\"email\" />\n                <input className=\"login__form--password\" placeholder=\"password\" type=\"password\" name=\"password\" />\n                <button className=\"login__form--button\">Submit</button>\n            </form>\n            {message && <Modal message={message} showModal={handleModal}/>}\n            </section>\n        </main>\n\n        \n    </>\n}\n\nexport default withRouter(Login)"]},"metadata":{},"sourceType":"module"}